<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:f="jakarta.faces.core"
                xmlns:ui="jakarta.faces.facelets"
                template="template.xhtml">

    <ui:define name="title">Gerenciar GÃªneros</ui:define>

    <ui:define name="content">

        <style>
            .page-title {
                font-size: 2.2rem;
                font-weight: bold;
                margin-bottom: 20px;
                color: #2c3e50;
                text-align: center;
            }

            .btn-primary {
                background-color: #3498db;
                color: white;
                padding: 10px 18px;
                border-radius: 8px;
                border: none;
                cursor: pointer;
                transition: 0.3s;
            }
            .btn-primary:hover {
                background-color: #2980b9;
            }

            .section-title {
                font-size: 1.4rem;
                margin-top: 30px;
                color: #34495e;
            }

            .search-grid {
                margin-top: 10px;
                background: #f7f7f7;
                padding: 15px;
                border-radius: 8px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
                background: #fff;
            }

            th, td {
                padding: 12px;
                text-align: left;
            }

            th {
                background-color: #ecf0f1;
                font-weight: bold;
            }

            tr:nth-child(even) {
                background-color: #f9f9f9;
            }

            .btn-action {
                padding: 6px 12px;
                border-radius: 6px;
                border: none;
                cursor: pointer;
                transition: 0.3s;
            }
            .btn-view {
                background-color: #8e44ad;
                color: white;
            }
            .btn-view:hover {
                background-color: #732d91;
            }

            .btn-edit {
                background-color: #f39c12;
                color: white;
            }
            .btn-edit:hover {
                background-color: #d68910;
            }

            .btn-remove {
                background-color: #e74c3c;
                color: white;
            }
            .btn-remove:hover {
                background-color: #c0392b;
            }

            .message {
                margin-top: 20px;
                font-size: 1.1rem;
                color: green;
            }
        </style>

        <h1 class="page-title">ðŸŽ¼ Gerenciar GÃªneros</h1>

        <div rendered="#{loginBean.usuarioLogado.logado and loginBean.usuarioLogado != null}">
            <h:form>
                <h:commandButton value="Cadastrar Novo GÃªnero"
                                 styleClass="btn-primary"
                                 action="#{generoBean.enviarParaPaginaDeCadastro()}" />
            </h:form>

            <h2 class="section-title">Buscar GÃªneros</h2>

            <h:form>
                <h:panelGrid columns="3" styleClass="search-grid">
                    <h:outputLabel value="Nome:" />
                    <h:inputText value="#{generoBean.nomeBusca}" style="padding:6px; border-radius:6px; border:1px solid #ccc;">
                        <f:ajax event="keyup" render="tabela" />
                    </h:inputText>
                    <h:commandButton value="Buscar" styleClass="btn-primary" action="#{generoBean.buscar}" />
                </h:panelGrid>
            </h:form>

            <!-- TABELA -->
            <h:dataTable id="tabela"
                         value="#{empty generoBean.listaFiltrada ? generoBean.generos : generoBean.listaFiltrada}"
                         var="g" border="1">

                <h:column>
                    <f:facet name="header">GÃªnero</f:facet>
                    <h:outputText value="#{g.nome}" />
                </h:column>

                <h:column>
                    <f:facet name="header">MÃºsicas</f:facet>
                    <h:form>
                        <h:commandButton value="Ver MÃºsicas" styleClass="btn-action btn-view"
                                         action="#{generoBean.enviarParaPaginaDeMusicas(g)}" />
                    </h:form>
                </h:column>

                <h:column rendered="#{loginBean.usuarioLogado.adm}">
                        <f:facet name="header">Editar</f:facet>
                        <h:form>
                            <h:commandButton value="Editar" styleClass="btn-action btn-edit"
                                             action="#{generoBean.enviarParaPaginaDeEdicao(g)}" />
                        </h:form>
                    </h:column>

                    <h:column rendered="#{loginBean.usuarioLogado.adm}">
                        <f:facet name="header">Remover</f:facet>
                        <h:form>
                            <h:commandButton value="Remover" styleClass="btn-action btn-remove"
                                             action="#{generoBean.remover(g)}"
                                             onclick="return confirm('Tem certeza que deseja remover este gÃªnero?')" />
                        </h:form>
                    </h:column>

            </h:dataTable>

            <h:outputText value="#{generoBean.mensagemResultadoCadastro}" styleClass="message" />

        </div>
    </ui:define>

</ui:composition>